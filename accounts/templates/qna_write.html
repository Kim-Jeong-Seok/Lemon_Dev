{% extends 'base.html' %}
{% block title %}레몬::문의하기{% endblock title %}
{% block container %}

<h1>문의작성</h1>
<a href="/qna/list">문의내역></a>
<form enctype="multipart/form-data" method="POST">
  {% csrf_token %}
  <input type="text" style="display: none;" readonly name="user" value="{{user.user_id}}"/>
  문의 유형: 
  <select name="category" class="qnaCategory" onchange="activateBtn()">
    <option value="0">--- 문의 유형 ---</option>
    <option value="1">계정</option>
    <option value="2">가계부</option>
    <option value="3">주식</option>
    <option value="4">기타</option>
  </select>
  <br>
  제목: <input type="text" name="title" class="qnaTitle" onkeyup="activateBtn()" placeholder="필수입력" value="{{ form.title.value|default_if_none:'' }}"><br>
  내용: <textarea name="content" class="qnaContent" onkeyup="activateBtn()" placeholder="필수입력" value="{{ form.content.value|default_if_none:'' }}"></textarea><br>
  <input type="file" name="file"><br>
  <button type="submit" class="qnaSubmitBtn">등록하기</button>
</form>

<script>
  /* 필수항목 입력시 Btn 활성화 */
  document.addEventListener("DOMContentLoaded", function(event) {
    document.querySelector(".qnaSubmitBtn").disabled = "true";
  });

  function activateBtn() {
    let category = document.querySelector(".qnaCategory").value,
    title = document.querySelector(".qnaTitle").value,
    content = document.querySelector(".qnaContent").value;

    if ((category === "0") || (title === "") || (content === "")) {
      document.querySelector(".qnaSubmitBtn").disabled = true;
    } else {
      document.querySelector(".qnaSubmitBtn").disabled = false;
    }
  }
</script>

{% endblock %}