{% extends 'base.html' %}
{% block title %}레몬::모의주식{% endblock title %}
{% block container %}
{% load humanize %}
{% load mathfilters %}
<style>
    .bottom-nav-addlist,.bottom-nav-addlist a{
        color: #FFD859;
    }
    .wrapper{
    padding:20px;
    }
    .stock{
    background-color:#31bc8a;
    border-radius:10px;
    padding:20px;
    margin-top:10px;
    }
    .title{
    font-size:18px;
    color:white;
    font-weight:bold;
    }
    .side{
    float:right;
    color:#f1f1f1;
    font-size:11px;
    }
    .my_stock{
    text-align: center;
    display: flex;
    justify-content: center;
    padding-top:20px;
    }
.footer-line-portfolio{
    width:50px;
    padding: 12px 0 10px 0;
    border-bottom: 2px solid #FFF;
    }
</style>
{% load mytag %}
<div class="wrapper">
    <div><strong>{{user.uid}}</strong>님의</div>
    <div><strong>포트폴리오</strong></div>
<div>
<div class="stock">
    <span class="side">현재까지 수익률</span>
    <div class="title">주식</div>

<div style="text-align:center;font-size:22px;">{{total_investment_amount|intcomma}}원</div>
    <div style="text-align:center;font-size:14px;color:white;">{{total_current_price|sub:total_investment_amount|intcomma}}({{total_current_price|yields:total_investment_amount|rounds:2}}%)</div>

    <div class="my_stock"><a href="{% url 'stocks:stock' %}" style="width:40%;color:#31bc8a; padding:10px 20px 10px 20px; border-radius: 10px; background-color:white;">보유 주식</a></div>
</div></div>

<div class="home-chart" id="home-chart" style="padding:20px;">
    <div class="title" style="color:black;margin-bottom:20px;">주식 정보</div>
    <div style="text-align:center;font-size:14px;text-align:left;">가상 자산 {{user.invest}} 원에서 {{total_current_price|yields:total_investment_amount|rounds:2}}% 증가</div>
    <div style="text-align:center;font-size:14px;text-align:left;">손익 : {{total_current_price|sub:total_investment_amount|intcomma}}</div>
        <canvas id="myChart2" width="100" height="100"></canvas>
        <script>
        const ctx = document.getElementById('myChart2').getContext('2d');
        const myChart = new Chart(ctx, {
            if(data=['0','0']){
                console.log('데이터가 0');
            },
            type: 'doughnut',
            data: {
                labels: ['(가상금액-구매한금액)','구매한금액','손익금'],
                datasets: [{
                    data: ['1000000', '1500000', '4000000'],
                    backgroundColor: [
                        '#5989DD',
                        '#D46A84',
                        '#4ACBD7',
                        '#F3CD55',

                    ],
                    borderColor: [
                        '#5989DD',
                        '#D46A84',
                        '#4ACBD7',
                        '#F3CD55',

                    ],
                    borderWidth: 0
                }]
            },
            options: {
                //legend: { display: false },
                rotation: 1 * Math.PI,
                circumference: 1 * Math.PI
            }
        });
        </script>
    </div>

<div class="stock" style="margin-top:20px;">
    <span class="side">금일 기준</span>
    <div class="title">주문 가능 금액</div>
    <div style="text-align:center;font-size:22px;">{{user.invest|add:total_use_investment_amount|intcomma}}</div>
    <div class="my_stock"><a href="{% url 'admins:edit_invest' %}" style="width:40%;color:#31bc8a; padding:10px 20px 10px 20px; border-radius: 10px; background-color:white;">변경</a></div>
    </div>
</div>

   <div style="background-color:#fff; margin:20px 5% 40px 5%; padding: 10px;">
    <div style="text-align:left; font-weight: bold; font-size:16px;">
      <a style="font-weight: bold; font-family: 'Noto Sans KR', sans-serif; font-size:16pt;">포토폴리오 기반 추천 Top 5</a><br>

        {{category_stock.0}}<br>
        {{category_stock.1}}<br>
        {{category_stock.2}}<br>
        {{category_stock.3}}<br>
        {{category_stock.4}}<br>


  <div>
  <ol style="padding-left: 1rem !important;">
    <table border="0" style="width: 100%; margin-top:10px; border-collapse:inherit;">

    </table>
  </ol>
  </div>
  </div><!-- 건수 탑5 div 끝-->

<script>
$(document).ready(function(){
    //$('.footer-selector').fadeIn(550);
});
</script>
{% endblock %}
